---
export interface Props {
  text: string;
  colors: string[];
}

const { text, colors } = Astro.props;

const lightColor = colors[6];  // メインカラー（例：街灯の温かみのある光）
const shadowColor = colors[7]; // シャドウカラー（例：街灯に染まる闇）
const textId = "film-text";
const noiseId = "film-noise";
const gradientId = "film-gradient";
---

<div class="relative py-1">
  <svg class="w-full h-12" viewBox="0 0 200 42" preserveAspectRatio="xMidYMid meet">
    <defs>
      <!-- ベーステキスト定義 -->
      <text
        id={textId}
        x="50%"
        y="50%"
        text-anchor="middle"
        dominant-baseline="middle"
        class="text-3xl font-bold font-inter"
      >
        {text}
      </text>

      <!-- ノイズフィルター -->
      <filter id={noiseId}>
        <feTurbulence
          type="fractalNoise"
          baseFrequency="8"
          numOctaves="3"
          stitchTiles="stitch"
        />
        <feColorMatrix type="saturate" values="0"/>
        <feComponentTransfer>
          <feFuncR type="gamma" amplitude="0.3" exponent="1"/>
          <feFuncG type="gamma" amplitude="0.3" exponent="1"/>
          <feFuncB type="gamma" amplitude="0.3" exponent="1"/>
        </feComponentTransfer>
        <feComposite operator="in" in2="SourceGraphic"/>
      </filter>

      <!-- シャドウ用グラデーション（透明から影色へ） -->
      <linearGradient id={gradientId} x1="0" x2="0" y1="0" y2="1">
        <stop offset="0%" stop-color={shadowColor} stop-opacity="0" />
        <stop offset="60%" stop-color={shadowColor} stop-opacity="0" />
        <stop offset="100%" stop-color={shadowColor} stop-opacity="0.5" />
      </linearGradient>
    </defs>

    <!-- ベーステキスト（単色） -->
    <use 
      href={`#${textId}`}
      fill={lightColor}
    />

    <!-- シャドウ＋ノイズレイヤー -->
    <use 
      href={`#${textId}`}
      fill={`url(#${gradientId})`}
      filter={`url(#${noiseId})`}
      style="mix-blend-mode: multiply; filter: contrast(150%) brightness(100%);"
    />

    <!-- 光沢効果 -->
    <use 
      href={`#${textId}`}
      fill={lightColor}
      style="mix-blend-mode: soft-light; opacity: 0.3; filter: brightness(150%);"
    />
  </svg>
</div>